# 스프링 MVC - 웹 애플리케이션 이해

## 1. 웹 서버 & WAS 개념

- **웹 서버(Web Server)**: HTTP 기반 동작, 정적 리소스(HTML, CSS, JS, 이미지, 영상 등) 제공
  - 예: NGINX, Apache
- **웹 애플리케이션 서버(WAS)**: HTTP 기반 동작, 정적 리소스 제공 + 애플리케이션 로직 수행
  - 예: Tomcat, Jetty, Undertow
- **차이점**:
  - 웹 서버는 파일 제공 (정적), WAS는 애플리케이션 로직 처리 (동적)
  - 현대에는 경계가 모호함: 웹 서버도 일부 동적 처리, WAS도 정적 리소스 제공 가능
- **웹 시스템 구성 예시**
  - WAS + DB 만으로도 구성 가능하지만, 정적 리소스 부하 때문에 Web Server를 앞단에 둠
  - 효율적인 리소스 분산 가능: 정적 요청 많으면 Web Server 증설, 로직 많으면 WAS 증설
  - Web Server는 안정적, WAS는 상대적으로 장애 발생 가능성 있음

## 2. 서블릿(Servlet)

- 웹 요청을 처리하는 자바 클래스. URL 패턴에 따라 실행
- 서블릿 컨테이너(WAS)가 관리하며, 생성/초기화/호출/종료까지 책임짐
- HTTP 요청/응답 객체 (`HttpServletRequest`, `HttpServletResponse`)를 사용해 클라이언트와 통신
- HTTP 메시지 파싱, 비즈니스 로직 수행, 응답 메시지 생성 등 전 과정을 포함
- 서블릿은 **싱글톤**으로 동작하므로 멀티 쓰레드 환경에서 공유 변수 사용 주의
- JSP도 서블릿으로 변환되어 동작

## 3. 멀티 쓰레드와 쓰레드 풀

- 요청마다 별도 쓰레드를 사용하여 동시 요청 처리 가능
- 장점: 지연된 요청과 무관하게 다른 요청 처리 가능
- 단점: 쓰레드 생성 비용 큼, 컨텍스트 스위칭 비용, 임계점 넘으면 서버 다운 가능
- **쓰레드 풀** 사용으로 개선
  - 미리 쓰레드 생성 및 재사용
  - 최대 쓰레드 수 제한 가능 (Tomcat 기본 200)
  - 대기 요청은 거절하거나 대기열 설정 가능

### 실무 튜닝 팁

- max thread 값이 가장 중요한 튜닝 포인트
- 너무 낮으면 응답 지연, 너무 높으면 서버 과부하로 다운 가능
- 실제 트래픽과 유사한 조건에서 성능 테스트 진행 권장

## 4. 정적 리소스, HTML, HTTP API

### 정적 리소스
- HTML, CSS, JS, 이미지, 영상 등 서버에 있는 고정된 파일 응답

### HTML 동적 페이지
- JSP, 타임리프 등 템플릿 엔진으로 WAS가 HTML을 동적으로 생성해 응답

### HTTP API
- 데이터를 JSON/XML 형식으로 응답
- 주로 클라이언트 앱, 자바스크립트, 다른 서버에서 사용
- 서버 간 API 연동, 모바일 앱, SPA 프론트엔드에서 중요

## 5. SSR(Server Side Rendering) vs CSR(Client Side Rendering)

| 구분 | SSR | CSR |
|------|-----|-----|
| 위치 | 서버에서 HTML 생성 | 브라우저에서 JS로 HTML 생성 |
| 장점 | 빠른 첫 로딩, SEO 유리 | 동적 UI, 앱처럼 빠른 UX |
| 기술 | JSP, 타임리프 | React, Vue |
| 사용처 | 정적인 화면, 빠른 초기 응답 | 동적인 UI, 사용자 상호작용 많은 경우 |

## 6. 백엔드 개발자 관점의 UI 기술 학습

- 서버 사이드 렌더링(JSP, 타임리프)은 백엔드 개발자 필수 역량
- CSR(React, Vue 등)은 선택 사항
- 프론트엔드 학습은 깊이 필요하므로 선택과 집중 필요

## 7. 자바 웹 기술 역사

- 1997: 서블릿 등장
- 1999: JSP 등장, 뷰 생성 편리해졌으나 로직 분리 어려움
- 2000~2010: MVC 프레임워크 (Struts, Spring MVC 등)
- 최근: 애노테이션 기반 Spring MVC, `@Controller`
- Spring Boot 등장: 내장 서버 제공, JAR 배포로 단순화

## 8. 최신 기술: WebFlux

- Spring WebFlux는 논블로킹 비동기 모델
- 특징: 최소 쓰레드, 함수형 스타일, 높은 처리량
- 서블릿 기술 사용하지 않음
- 단점: 학습 난이도 높고, RDB 연동 부족
- 실무에서는 아직 사용 비율 낮음 (1% 이하)

## 9. 자바 뷰 템플릿 비교

| 기술 | 특징 |
|------|------|
| JSP | 느리고 기능 부족 |
| Freemarker, Velocity | 빠르고 다양한 기능 제공 |
| Thymeleaf | 내추럴 템플릿, HTML 유지, Spring MVC와 통합 우수 |

